{% extends "base.html" %}

{% block title %}Order Confirmation - FreshBasket{% endblock %}

{% block content %}
<div class="order-confirmation-page">
    <div class="confirmation-container">
        <div class="confirmation-header">
            <div class="confirmation-icon">✅</div>
            <h1>Order Confirmed!</h1>
            <p>Thank you for your purchase</p>
        </div>

        <div class="order-details">
            <div class="detail-row">
                <span class="detail-label">Order Number:</span>
                <span class="detail-value">#{{ "%06d"|format(order.id) }}</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Order Date:</span>
                <span class="detail-value">{{ order.order_date.strftime('%B %d, %Y at %I:%M %p') }}</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Status:</span>
                <span class="detail-value order-status">{{ order.status|title }}</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Total Amount:</span>
                <span class="detail-value price">${{ "%.2f"|format(order.total_amount) }}</span>
            </div>
        </div>

        <div class="order-items-section">
            <h2>Order Items</h2>
            <div class="confirmation-items">
                {% for item in order.items %}
                    <div class="confirmation-item">
                        <div class="item-name">
                            {{ item.product.name }}
                            <span class="item-qty">× {{ item.quantity }}</span>
                        </div>
                        <div class="item-price">${{ "%.2f"|format(item.price) }} each</div>
                        <div class="item-subtotal">${{ "%.2f"|format(item.get_subtotal()) }}</div>
                    </div>
                {% endfor %}
            </div>
        </div>

        <div class="shipping-info">
            <h2>Shipping Information</h2>
            <div class="shipping-address">
                <p>{{ order.shipping_address|safe }}</p>
            </div>
            {% if order.notes %}
                <div class="delivery-notes">
                    <h3>Delivery Notes:</h3>
                    <p>{{ order.notes }}</p>
                </div>
            {% endif %}
        </div>

        <div class="next-steps">
            <h2>What's Next?</h2>
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h3>Order Processing</h3>
                        <p>We're processing your order and preparing it for shipment.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h3>Shipment</h3>
                        <p>Your fresh produce will be shipped within 24 hours.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h3>Delivery</h3>
                        <p>Expect delivery within 2-3 business days.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="confirmation-actions">
            <a href="{{ url_for('user_orders') }}" class="btn btn-primary">View All Orders</a>
            <a href="{{ url_for('products') }}" class="btn btn-secondary">Continue Shopping</a>
        </div>

        <div class="confirmation-footer">
            <p>A confirmation email has been sent to <strong>{{ current_user.email }}</strong></p>
            <p>You can track your order status anytime from your account.</p>
        </div>
    </div>
</div>
{% endblock %}
